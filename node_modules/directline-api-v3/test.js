var BotConnect = require('./');
//var b=new BotConnect();
//console.log(b.getBaseUrl());
var token;
BotConnect.getTokenObject('3TL1kEsa6oY.cwA.YLE.XGl-CabpOsbD2jV6qQpoU1RHgC1stkURML8TrRhb2Z4').subscribe(
    (data)=>{
        console.log(data);
         token = data;
        BotConnect.initConversationStream(data).subscribe(
            (data)=>{
                  console.log(data);
            },
            (err)=>console.log(err),
            ()=>console.log("complete")
        )
    },
    (err)=>console.log(err),
    ()=>console.log('complete')
)
setTimeout(()=>{console.log("sending message hello");BotConnect.sendMessage(token,"hello").subscribe(
                      (data)=>console.log(data),
                      (err)=>console.log(err),
                      ()=>console.log("complete")
)},5000);
setTimeout(()=>{console.log("closing conversation");BotConnect.endConversation(token).subscribe(
                      (data)=>console.log(data),
                      (err)=>console.log(err),
                      ()=>console.log("complete")
)},20000);

